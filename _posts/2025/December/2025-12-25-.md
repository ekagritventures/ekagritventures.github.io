---
layout: post
title: Daily Note 2025-12-25
slug: daily-note-2025-Dec-25-25th
date: 2025-12-25
tags:
published: true
---
Implemented a vanilla interest rate swap in python today.

Here's the(clunky but working!) code:

```


import numpy as np
import matplotlib.pyplot as plt

# We assume quarterly payments over 5 years.


n_periods = 20          # 20 quarterly payments
dt = 0.25               # 1 quarter = 0.25 years
times = np.arange(1, n_periods + 1) * dt

# Example:
# times = [0.25, 0.5, 0.75, ..., 5.0]


sofr = 0.03 + 0.005 * np.sin(2 * times) # around 3%
spread = 0.02                             # +2%
floating_rate = sofr + spread



N = 1_000_000        # Notional = 1 million
r_fixed = 0.055      # Fixed interest rate = 5.5%



fixed_leg = N * r_fixed * dt * np.ones(n_periods)
floating_leg = N * floating_rate * dt





swap_cashflows = -fixed_leg + floating_leg


plt.figure(figsize=(12, 4))
plt.bar(times, swap_cashflows)
plt.axhline(0, color="black", linewidth=0.8)
plt.title("Swap Cash Flows (Pay Fixed, Receive Floating)")
plt.xlabel("Time (years)")
plt.ylabel("Cash Flow")
plt.show()

plt.figure(figsize=(12, 4))
plt.plot(times, fixed_leg, label="Fixed Leg", linewidth=2)
plt.plot(times, floating_leg, label="Floating Leg", linewidth=2)
plt.legend()
plt.title("Fixed vs Floating Interest Payments")
plt.xlabel("Time (years)")
plt.ylabel("Cash Flow")
plt.show()



discount_rate = 0.04   # assume a flat 4% discount rate
discount_factors = np.exp(-discount_rate * times)


pv_fixed = np.sum(discount_factors * fixed_leg)
pv_floating = np.sum(discount_factors * floating_leg)
pv_swap = pv_floating - pv_fixed

print("Present Value of Fixed Leg   :", round(pv_fixed, 2))
print("Present Value of Floating Leg:", round(pv_floating, 2))
print("Present Value of Swap        :", round(pv_swap, 2))


# The par rate is the fixed rate that makes the swap value zero.

annuity = np.sum(discount_factors * dt)
par_rate = pv_floating / (N * annuity)

print("Par Swap Rate:", round(par_rate, 6))


r_fixed = par_rate
fixed_leg = N * r_fixed * dt * np.ones(n_periods)
swap_cashflows = -fixed_leg + floating_leg
pv_swap = np.sum(discount_factors * swap_cashflows)

print("Swap PV using Par Rate (â‰ˆ 0):", round(pv_swap, 6))




```

